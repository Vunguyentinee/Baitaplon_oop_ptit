<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lowtech Store – Shop bán đồ thể thao số 1 Itis</title>
  <!--
    📝 BẢN HOÀN CHỈNH (1 FILE):
    - Có trang chi tiết sản phẩm (hash router #/product/:id) để CHỌN SIZE trước khi thêm giỏ.
    - Click ảnh/tên/nút "Chọn size" trong grid -> mở trang chi tiết.
    - Cart lưu theo từng size.
  -->
  <style>
    :root {
      --primary: #e6ebee;
      --primary-600: #e9edf0;
      --accent: #f97316;
      --dark: #f0f1f5;
      --muted: #f3f4f5;
      --bg: #eeeff3;
      --card: #f0f1f3;
      --stroke: #f4f4f5;
      --success: #f9fcfa;
      --danger: #ef4444;
      --radius: 16px;
      --shadow: 0 10px 30px rgb(243, 245, 248);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: #01060c;
      background: radial-gradient(1000px 600px at 10% 0%, #f0f1f3, #dee0e6 50%) fixed;
    }
    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }
    button { cursor: pointer; font: inherit; }
    input, select { font: inherit; }

    .topbar { background: linear-gradient(90deg, var(--primary) 0%, #22d3ee 60%, #fa8b8b 100%); color:#0b1020; padding:8px 16px; text-align:center; font-weight:600; }

    header { position: sticky; top: 0; z-index: 50; backdrop-filter: blur(10px); background: rgba(236,237,240,.986); border-bottom: 1px solid var(--stroke); }
    .header-inner { max-width: 1200px; margin: 0 auto; padding: 14px 16px; display: grid; grid-template-columns: 180px 1fr auto; gap: 12px; align-items: center; }
    .logo { display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
    .logo-dot { width:28px; height:28px; border-radius:8px; background: linear-gradient(145deg, var(--primary), #22d3ee); box-shadow: var(--shadow); }

    .search { display:flex; gap:10px; align-items:center; background:#f3f3f5; border:1px solid var(--stroke); border-radius:999px; padding:8px 12px; }
    .search input { flex:1; outline: none; border: 0; background: transparent; color:#0b1020; }
    .btn-primary { background: linear-gradient(135deg, var(--primary), #22c55e); border: 0; color:#0b1020; font-weight:700; padding:10px 16px; border-radius:999px; box-shadow: var(--shadow); }

    .header-actions { display:flex; align-items:center; gap:10px; }
    .hotline { font-weight:700; color:#000311; }
    .icon-btn { display:flex; align-items:center; gap:8px; background:#4772e7; color:#fff; border:1px solid var(--stroke); padding:8px 12px; border-radius:999px; }

    .nav { border-top:1px solid var(--stroke); border-bottom:1px solid var(--stroke); background: rgba(249,250,250,.997); }
    .nav-inner { max-width:1200px; margin:0 auto; padding:8px 16px; display:flex; gap:12px; flex-wrap:wrap; }
    .nav a { padding:8px 12px; border-radius:12px; border:1px solid transparent; color:#000; }
    .nav a:hover, .nav a.active { border-color: var(--stroke); color:#000; background: rgba(0,0,0,.04); }

    .hero { max-width:1200px; margin:20px auto; padding:0 16px; display:grid; grid-template-columns: 2fr 1fr; gap:16px; }
    .banner { position:relative; overflow:hidden; border-radius: var(--radius); background:#f2f2f6; border:1px solid var(--stroke); }
    .banner .slides { display:flex; transition: transform .5s ease; }
    .banner .slide { min-width:100%; aspect-ratio:16/7; display:grid; place-items:center; position:relative; }
    .banner .slide::before { content:""; position:absolute; inset:0; background: radial-gradient(600px 260px at 100%, rgba(255,255,255,.979), transparent 0%); }
    .banner h2 { font-size: clamp(24px, 4vw, 42px); margin:0; text-align:center; }
    .banner p { color:#0a1124; text-align:center; margin-top:8px; }
    .banner .dots { position:absolute; bottom:12px; left:50%; transform:translateX(-50%); display:flex; gap:6px; }
    .dot { width:8px; height:8px; border-radius:999px; background:#334155; border:1px solid var(--stroke); }
    .dot.active { background:#e2e8f0; }

    .promo { display:grid; gap:16px; }
    .promo .card { border-radius: var(--radius); background:#f6f6f8; border:1px solid var(--stroke); padding:18px; min-height:140px; position:relative; overflow:hidden; }
    .promo .card h3 { margin:0 0 6px; }
    .promo .card small { color:#6b7280; }

    .toolbar { max-width:1200px; margin:24px auto 0; padding:0 16px; display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content: space-between; }
    .filters { display:flex; gap:8px; flex-wrap:wrap; }
    .chip { border:1px solid var(--stroke); background:#fff; color:#0a1124; padding:8px 12px; border-radius:999px; }
    .chip.active { outline:2px solid var(--primary); color:#0a1124; }
    .sort { border:1px solid var(--stroke); background:#fff; color:#0a1124; padding:8px 12px; border-radius:12px; }

    .products { max-width:1200px; margin:16px auto; padding:0 16px; display:grid; grid-template-columns: repeat(4,1fr); gap:16px; }
    .product { border:1px solid var(--stroke); background: linear-gradient(180deg, #f8fafc, #7d98e1); border-radius:16px; overflow:hidden; position:relative; transition: transform .2s ease, box-shadow .2s ease; }
    .product:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
    .thumb { aspect-ratio:1/1; background: radial-gradient(200px 120px at 60% 20%, rgba(232, 235, 236, 0.15), transparent 60%), radial-gradient(200px 120px at 30% 80%, rgba(234,179,8,.12), transparent 60%); display:grid; place-items:center; }
    .thumb svg { width:64px; height:64px; opacity:.9; }
    .p-body { padding:12px; }
    .badge { position:absolute; top:10px; left:10px; background: var(--accent); color:#f8fafc; font-weight:800; padding:6px 10px; border-radius:999px; font-size:12px; }
    .title { font-weight:700; margin:6px 0 4px; }
    .brand { color:#a5b4fc; font-size:13px; }
    .price { margin-top:8px; display:flex; align-items:baseline; gap:8px; }
    .price .new { font-weight:900; font-size:18px; color:#f8fafc; }
    .price .old { color:#64748b; text-decoration: line-through; font-size:13px; }
    .p-actions { display:grid; grid-template-columns: 1fr; gap:8px; margin-top:10px; }
    .btn-outline { background: transparent; border: 1px solid var(--stroke); color: #0b1020; padding: 8px 10px; border-radius: 12px; }

    /* Trang chi tiết sản phẩm */
    .detail { max-width:1000px; margin:24px auto; padding:0 16px; display:grid; grid-template-columns: 1fr 1.2fr; gap:24px; }
    .detail .card { border:1px solid var(--stroke); background:#fff; border-radius:16px; padding:18px; }
    .size-group { display:flex; gap:8px; flex-wrap:wrap; }
    .size-option { border:1px solid var(--stroke); background:#fff; padding:10px 14px; border-radius:12px; cursor:pointer; }
    .size-option.active { outline:2px solid #22c55e; font-weight:700; }
    .qty-row { display:flex; align-items:center; gap:10px; margin-top:10px; }
    .qty-row button { width:32px; height:32px; border-radius:8px; border:1px solid var(--stroke); background:#0b1328; color:#e2e8f0; }
    .backlink { display:inline-flex; align-items:center; gap:8px; margin-bottom:12px; }
    .detail .title { font-size:22px; }

    /* Drawer giỏ hàng */
    .cart-drawer { position: fixed; inset: 0 0 0 auto; width: min(420px, 100%); background:#f8f9fa; border-left:1px solid var(--stroke); transform:translateX(100%); transition: transform .3s ease; z-index:60; display:grid; grid-template-rows: auto 1fr auto; }
    .cart-drawer.open { transform: translateX(0); }
    .cart-head, .cart-foot { padding:16px; border-bottom:1px solid var(--stroke); }
    .cart-foot { border-bottom:0; border-top:1px solid var(--stroke); }
    .cart-items { padding:12px 16px; overflow:auto; }
    .cart-item { display:grid; grid-template-columns: 56px 1fr auto; gap:10px; align-items:center; padding:10px 0; border-bottom:1px dashed var(--stroke); }
    .qty { display:flex; align-items:center; gap:8px; }
    .qty button { width:28px; height:28px; border-radius:8px; border:1px solid var(--stroke); background:#0b1328; color:#e2e8f0; }

    footer { margin-top:40px; border-top:1px solid var(--stroke); background: rgba(253,253,253,.997); }
    .footer-inner { max-width:1200px; margin:0 auto; padding:24px 16px; display:grid; grid-template-columns: 2fr 1fr 1fr; gap:20px; }
    .ft-col h4 { margin:0 0 10px; }
    .newsletter { display:flex; gap:8px; }
    .newsletter input { flex:1; border-radius:12px; border:1px solid var(--stroke); background:#e2e8f0; color:#0a1124; padding:10px 12px; }

    @media (max-width:980px){ .hero { grid-template-columns:1fr; } .products { grid-template-columns: repeat(2,1fr); } .header-inner { grid-template-columns: 1fr auto; } .logo { grid-column: 1/-1; } .detail { grid-template-columns: 1fr; } }
    @media (max-width:600px){ .products { grid-template-columns: 1fr; } .footer-inner { grid-template-columns: 1fr; } }

   /* 👤 NÚT ICON ĐĂNG NHẬP */
.login-icon {
  position: relative;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.2s;
}

.login-icon:hover {
  background: #e2e8f0;
}

.login-icon img {
  width: 26px;
  height: 26px;
  object-fit: cover;
  border-radius: 50%;
}

.header-actions{
  display: flex;
  align-items: center;
  gap: 12px;              /* giãn cách giữa giỏ hàng và icon người */
  position: relative;
}
.header-actions > * { pointer-events: auto; }

/* Nút giỏ hàng (pill xanh) – giới hạn hit-area, tránh đè sang icon người */
.icon-btn{
  position: relative;     /* để z-index hoạt động đúng */
  z-index: 1;             /* nằm dưới icon người */
  padding: 10px 14px;     /* kích thước gọn vừa */
  line-height: 1;
  border-radius: 9999px;
  /* nếu có rule nào khác làm to/đẩy lệch (transform, absolute, margin âm) thì bỏ/ghi đè ở đây */
}

/* Icon người (nút đăng nhập) – luôn nổi trên giỏ hàng và có kích thước cố định */
.login-icon{
  position: relative;
  z-index: 2;             /* trên .icon-btn để không bị che */
  width: 36px;
  height: 36px;
  flex: 0 0 36px;         /* không bị co giãn khi header hẹp */
  border-radius: 50%;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: .2s;
  border: 1px solid var(--stroke);   /* viền nhẹ cho rõ ranh giới */
}
.login-icon:hover{ background:#e2e8f0; }
.login-icon svg, .login-icon img{
  width: 22px; height: 22px; border-radius: 50%; object-fit: cover;
}

/* (Tuỳ chọn) Nếu cart có badge số lượng dùng position tuyệt đối, giữ trong phạm vi nút */
.icon-btn .cart-count{
  position: absolute;
  top: -6px; right: -6px;
  min-width: 18px; height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  background: #ef4444; color: #fff;
  font-size: 12px; line-height: 18px;
  border: 2px solid #fff;
}

.icon-btn { z-index: 1; }
.login-icon { z-index: 2; }

/* Trang đăng nhập riêng */
.auth-page{
  min-height: calc(100dvh - 140px);
  display: grid;
  place-items: center;
  padding: 24px 16px;
}
.auth-card{
  width: min(420px, 100%);
  background: #fff;
  border: 3px solid var(--primary);     /* viền màu */
  color: #000;                          /* chữ đen */
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,.08);
}
.auth-card h2{ margin: 0 0 12px; text-align:center; color:#000; }
.auth-card label{ display:block; margin: 10px 0 6px; font-weight:600; color:#000; }
.auth-card input{
  width:100%; padding:10px; border:1.5px solid var(--primary);
  border-radius:10px; color:#000; background:#fff;
}
.auth-card input:focus{ outline:none; border-color: var(--primary-600); box-shadow: 0 0 4px var(--primary-600); }
.register-note{ text-align:center; font-size:14px; color:#000; }
.register-note a{ color: var(--primary-600); font-weight:600; text-decoration:none; }
.register-note a:hover{ text-decoration:underline; }


  </style>
</head>
<body>
  <div class="topbar">Miễn phí vận chuyển đơn từ 599k • Đổi size trong 7 ngày • Hotline: 0 123 456 789</div>

  <header>

    <div class="header-inner">
      <a class="logo" href="#" aria-label="Trang chủ"><span class="logo-dot"></span><span>Lowtech Store</span></a>
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <input id="searchInput" placeholder="Tìm giày, áo đấu, phụ kiện… (ví dụ: futsal, mercurial)" />
        <button class="btn-primary" id="searchBtn">Tìm</button>
      </div>
      <div class="header-actions">
        <div class="hotline">📞 0 123 456 789</div>
        <button class="icon-btn" id="openCart" aria-label="Mở giỏ hàng">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
          <span id="cartCount">0</span>
        </button>
        <div id="loginBtn" class="login-icon">
        <img src="https://th.bing.com/th/id/R.f58bd7f73934e1145c97570943087ec6?rik=41HmRGohn%2fnBJg&riu=http%3a%2f%2fwww.acsoft.vn%3a8081%2fresources%2fimages%2favatar.jpg&ehk=4oftGWjeo8XsGu%2fcHG2dUJubsKryVLuNa58H9D3TNKA%3d&risl=&pid=ImgRaw&r=0" alt="user" />
        <span class="notify-dot"></span>
        </div>
      </div>
    </div>
    <nav class="nav" aria-label="Danh mục">
      <div class="nav-inner">
        <a href="#" data-filter="">Tất cả</a>
        <a href="#" data-filter="giay">THƯƠNG HIỆU</a>
        <a href="#" data-filter="female">MÔN THỂ THAO</a>
        <a href="#" data-filter="ao">NAM</a>
        <a href="#" data-filter="bong">NỮ</a>
        <a href="#" data-filter="phukien">Phụ kiện</a>
        <a href="#" data-filter="sale">Sale</a>
        <a href="#" data-filter="moi">Hàng mới</a>
      </div>
    </nav>
  </header>

 <!-- Trang dang nhap rieng -->
  <section id="loginView" hidden>
  <div class="auth-page">
    <div class="auth-card">
      <h2>Đăng nhập tài khoản</h2>
      <form id="loginFormPage">
        <label for="usernamePage">Tên đăng nhập</label>
        <input id="usernamePage" type="text" placeholder="Nhập tên đăng nhập" required />

        <label for="passwordPage">Mật khẩu</label>
        <input id="passwordPage" type="password" placeholder="Nhập mật khẩu" required />

        <button type="submit" class="btn-primary" style="width:100%">Đăng nhập</button>
        <p class="register-note">
          Chưa có tài khoản? <a href="#">Đăng ký ngay</a>
        </p>
      </form>
      <a class="backlink" href="#">&larr; Về trang chủ</a>
    </div>
  </div>
</section>


  <!-- Trang chủ: Banner + Promo + Toolbar + Grid -->
  <section class="hero" id="heroSection" aria-label="Khuyến mãi nổi bật">
    <div class="banner" id="banner">
      <div class="slides">
        <div class="slide" style="background:linear-gradient(120deg,#6485d9 0%,#6485d9 100%)"><div><h2>SIÊU SALE FUTSAL • GIẢM ĐẾN 50%</h2><p>Chỉ trong tuần này – đặt nhanh kẻo hết size!</p></div></div>
        <div class="slide" style="background:linear-gradient(120deg,#6485d9 0%,#6485d9 100%)"><div><h2>ÁO ĐẤU MÙA MỚI 2025</h2><p>Đầy đủ CLB hot: MU, Real, Barca, City…</p></div></div>
        <div class="slide" style="background:linear-gradient(120deg,#6485d9 0%, #6485d9 100%)"><div><h2>PHỤ KIỆN CHÍNH HÃNG</h2><p>Bảo vệ – Vớ – Túi – Bình nước – Giá tốt mỗi ngày</p></div></div>
      </div>
      <div class="dots" aria-hidden="true"></div>
    </div>
    <div class="promo">
      <div class="card"><h3>Combo Giày + Vớ</h3><small>Mua combo tiết kiệm thêm 10%</small></div>
      <div class="card"><h3>Voucher thành viên</h3><small>Đăng ký nhận ngay mã -30K</small></div>
    </div>
  </section>

  <div class="toolbar" id="toolbar">
    <div class="filters">
      <button class="chip active" data-chip="all">Tất cả</button>
      <button class="chip" data-chip="sale">Đang giảm giá</button>
      <button class="chip" data-chip="moi">Hàng mới</button>
      <button class="chip" data-chip="<1000">Dưới 1triệu</button>
      <button class="chip" data-chip=">=1000">Từ 1triệu</button>
    </div>
    <select class="sort" id="sortSelect" aria-label="Sắp xếp">
      <option value="popular">Phổ biến</option>
      <option value="price-asc">Giá tăng dần</option>
      <option value="price-desc">Giá giảm dần</option>
      <option value="newest">Mới nhất</option>
    </select>
  </div>

  <!-- TRANG CHI TIẾT SẢN PHẨM (hash router) -->
  <section id="detailView" hidden>
    <div class="detail">
      <div class="card" id="detailGallery">
        <a href="#" class="backlink">⬅ Quay lại</a>
        <div style="width:100%; aspect-ratio:1/1; border-radius:12px; background:#0b1328; display:grid; place-items:center; border:1px solid var(--stroke); margin-top:8px">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:96px; height:96px; color:#e2e8f0"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2v20M4 4l4 4M20 4l-4 4M4 20l4-4M20 20l-4-4"/></svg>
        </div>
      </div>
      <div class="card">
        <div id="detailBrand" class="brand"></div>
        <div id="detailTitle" class="title"></div>
        <div class="price" style="margin-left:-2px">
          <span id="detailPrice" class="new"></span>
          <span id="detailOld" class="old"></span>
        </div>
        <div style="margin-top:16px">
          <div style="font-weight:700; margin-bottom:8px">Chọn size</div>
          <div id="sizeGroup" class="size-group"></div>
          <div id="sizeHint" style="margin-top:8px; font-size:13px; color:#6b7280"></div>
        </div>
        <div class="qty-row">
          <span style="min-width:72px">Số lượng</span>
          <button id="minusBtn" aria-label="Giảm">-</button>
          <span id="qtyDisplay">1</span>
          <button id="plusBtn" aria-label="Tăng">+</button>
        </div>
        <div style="display:grid; grid-template-columns: 1fr; gap:10px; margin-top:16px">
          <button id="addToCartDetail" class="btn-primary" disabled>Thêm vào giỏ</button>
          <button id="buyNowBtn" class="btn-outline" disabled>Mua ngay</button>
        </div>
        <div id="detailMeta" style="margin-top:12px; font-size:13px; color:#6b7280"></div>
      </div>
    </div>
  </section>

  <!-- Lưới sản phẩm -->
  <section class="products" id="productGrid" aria-label="Danh sách sản phẩm"></section>

  <!-- Drawer giỏ hàng -->
  <aside class="cart-drawer" id="cartDrawer" aria-label="Giỏ hàng" aria-hidden="true">
    <div class="cart-head" style="display:flex; justify-content: space-between; align-items:center;">
      <strong>Giỏ hàng</strong>
      <button class="btn-outline" id="closeCart">Đóng</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-foot">
      <div style="display:flex; justify-content: space-between; margin-bottom: 12px;">
        <span>Tạm tính</span>
        <strong id="subtotal">0₫</strong>
      </div>
      <button class="btn-primary" style="width:100%" id="checkoutBtn">Thanh toán</button>
    </div>
  </aside>

  <footer>
    <div class="footer-inner">
      <div class="ft-col">
        <h4>LT SPORT STORE</h4>
        <p>Hệ thống cửa hàng đồ thể thao – chuyên giày, áo đấu & phụ kiện. Cam kết chính hãng, đổi size trong 7 ngày.</p>
        <div class="newsletter"><input placeholder="Nhập email để nhận ưu đãi" /><button class="btn-primary">Đăng ký</button></div>
      </div>
      <div class="ft-col"><h4>Liên hệ</h4><p>Hotline: 0 123 456 789<br/>Email: support@LTStore.vn<br/>CSKH: 8:00 – 22:00</p></div>
      <div class="ft-col"><h4>Chính sách</h4><p>Giao hàng & Đổi trả<br/>Bảo hành & Hướng dẫn sử dụng<br/>Thanh toán & Bảo mật</p></div>
    </div>
  </footer>




  <script>
    // =========================
    // DỮ LIỆU MẪU
    // =========================
    const products = [
      { id: 1, title: "F50 League", brand: "Adidas", price: 2400000, oldPrice: 1090000, tag: "sale", cate: "giay", createdAt: "2025-09-01" },
      { id: 2, title: "Áo đấu CLB City 24/25", brand: "City", price: 720000, oldPrice: 0, tag: "moi", cate: "ao", createdAt: "2025-08-14" },
      { id: 3, title: "Bóng Futsal Pro Size 4", brand: "ProBall", price: 560000, oldPrice: 680000, tag: "sale", cate: "bong", createdAt: "2025-07-10" },
      { id: 4, title: "Vớ thi đấu Elite", brand: "Elite", price: 120000, oldPrice: 0, tag: "moi", cate: "phukien", createdAt: "2025-08-28" },
      { id: 5, title: "Giày Futsal Phantom Z", brand: "SportZ", price: 990000, oldPrice: 1250000, tag: "sale", cate: "giay", createdAt: "2025-09-18" },
      { id: 6, title: "Áo đấu CLB Barca 24/25", brand: "Barca", price: 690000, oldPrice: 0, tag: "moi", cate: "ao", createdAt: "2025-07-30" },
      { id: 7, title: "Bình nước thể thao 800ml", brand: "Hydro", price: 150000, oldPrice: 0, tag: "", cate: "phukien", createdAt: "2025-06-18" },
      { id: 8, title: "Túi đựng giày chống thấm", brand: "GearUp", price: 190000, oldPrice: 0, tag: "", cate: "phukien", createdAt: "2025-09-22" },
    ];

    function iconBall(){ return `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M2 12h20M12 2v20M4 4l4 4M20 4l-4 4M4 20l4-4M20 20l-4-4\"/></svg>` }
    const vnd = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND', maximumFractionDigits: 0 });

    // =========================
    // RENDER LƯỚI SẢN PHẨM (link sang chi tiết)
    // =========================
    const grid = document.getElementById('productGrid');
    function renderProducts(list){
      grid.innerHTML = list.map(p => `
        <article class=\"product\" data-id=\"${p.id}\" data-cate=\"${p.cate}\" data-tag=\"${p.tag}\" data-price=\"${p.price}\" data-created=\"${p.createdAt}\">\n\
          ${p.tag === 'sale' ? `<span class=\"badge\">SALE</span>` : (p.tag === 'moi' ? `<span class=\"badge\" style=\"background:#22c55e;color:#07131f\">MỚI</span>` : '')}\n\
          <a class=\"thumb\" href=\"#/product/${p.id}\" aria-label=\"Mở chi tiết sản phẩm\">${iconBall()}</a>\n\
          <div class=\"p-body\">\n\
            <div class=\"brand\">${p.brand}</div>\n\
            <a class=\"title\" href=\"#/product/${p.id}\">${p.title}</a>\n\
            <div class=\"price\">\n\
              <span class=\"new\">${vnd.format(p.price)}</span>\n\
              ${p.oldPrice ? `<span class=\"old\">${vnd.format(p.oldPrice)}</span>` : ''}\n\
            </div>\n\
            <div class=\"p-actions\">\n\
              <a class=\"btn-outline\" href=\"#/product/${p.id}\">Chọn size</a>\n\
            </div>\n\
          </div>\n\
        </article>`).join('');
    }
    renderProducts(products);

    // =========================
    // LỌC & SẮP XẾP
    // =========================
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const sortSelect = document.getElementById('sortSelect');

    function applyFilters(){
      const term = searchInput.value.trim().toLowerCase();
      const activeChip = document.querySelector('.chip.active')?.dataset.chip || 'all';
      const navActive = document.querySelector('.nav-inner a.active')?.dataset.filter || '';
      let list = [...products];
      if (term) list = list.filter(p => (p.title + ' ' + p.brand).toLowerCase().includes(term));
      if (navActive) list = list.filter(p => p.cate === navActive || p.tag === navActive);
      if (activeChip === 'sale') list = list.filter(p => p.tag === 'sale');
      if (activeChip === 'moi') list = list.filter(p => p.tag === 'moi');
      if (activeChip === '<1000') list = list.filter(p => p.price < 1000000);
      if (activeChip === '>=1000') list = list.filter(p => p.price >= 1000000);
      const sortVal = sortSelect.value;
      if (sortVal === 'price-asc') list.sort((a,b)=> a.price - b.price);
      if (sortVal === 'price-desc') list.sort((a,b)=> b.price - a.price);
      if (sortVal === 'newest') list.sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
      renderProducts(list);
    }
    searchBtn.addEventListener('click', applyFilters);
    searchInput.addEventListener('keydown', e=>{ if(e.key==='Enter') applyFilters(); });
    sortSelect.addEventListener('change', applyFilters);
    document.querySelectorAll('.nav-inner a').forEach(a => { a.addEventListener('click', e => { e.preventDefault(); document.querySelectorAll('.nav-inner a').forEach(x => x.classList.remove('active')); a.classList.add('active'); applyFilters(); }) });
    document.querySelectorAll('.chip').forEach(chip => { chip.addEventListener('click', () => { document.querySelectorAll('.chip').forEach(c => c.classList.remove('active')); chip.classList.add('active'); applyFilters(); }); });

    // =========================
    // GIỎ HÀNG (lưu theo size)
    // =========================
    let cart = [];
    const openCartBtn = document.getElementById('openCart');
    const closeCartBtn = document.getElementById('closeCart');
    const cartDrawer = document.getElementById('cartDrawer');
    const cartItems = document.getElementById('cartItems');
    const subtotalEl = document.getElementById('subtotal');
    const cartCount = document.getElementById('cartCount');

    function toggleCart(show){ cartDrawer.classList.toggle('open', show); cartDrawer.setAttribute('aria-hidden', show ? 'false' : 'true'); }
    openCartBtn.addEventListener('click', () => toggleCart(true));
    closeCartBtn.addEventListener('click', () => toggleCart(false));

    function changeQty(id, delta, size){
      const it = cart.find(x=>x.id===id && x.size===size);
      if(!it) return;
      it.qty += delta;
      if (it.qty <= 0) cart = cart.filter(x=> !(x.id===id && x.size===size));
      renderCart();
    }

    function renderCart(){
      cartItems.innerHTML = cart.map(it => `
        <div class=\"cart-item\">\n\
          <div style=\"width:56px;height:56px;border-radius:10px;background:#0b1328;display:grid;place-items:center;border:1px solid var(--stroke)\">${iconBall()}</div>\n\
          <div>\n\
            <div style=\"font-weight:700\">${it.title}</div>\n\
            <div style=\"font-size:13px;color:#6b7280\">${it.brand} • Size <strong>${it.size}</strong></div>\n\
            <div style=\"margin-top:6px\">${vnd.format(it.price)}</div>\n\
          </div>\n\
          <div class=\"qty\">\n\
            <button aria-label=\"Giảm\" onclick=\"changeQty(${it.id},-1,'${it.size}')\">-</button>\n\
            <span>${it.qty}</span>\n\
            <button aria-label=\"Tăng\" onclick=\"changeQty(${it.id},1,'${it.size}')\">+</button>\n\
          </div>\n\
        </div>`).join('');
      const subtotal = cart.reduce((s, it) => s + it.price * it.qty, 0);
      subtotalEl.textContent = vnd.format(subtotal);
      cartCount.textContent = cart.reduce((s,it)=>s+it.qty,0);
    }

    document.getElementById('checkoutBtn').addEventListener('click', () => { alert('Đi tới trang thanh toán (demo)'); });

    // =========================
    // SHOW/HIDE VIEW + CHI TIẾT
    // =========================
    const heroSection   = document.getElementById('heroSection');
    const toolbarEl     = document.getElementById('toolbar');
    const detailView    = document.getElementById('detailView');
    const productsSection = document.getElementById('productGrid');

    function showHome(){
  heroSection.hidden = false;
  toolbarEl.hidden = false;
  productsSection.hidden = false;
  detailView.hidden = true;
  loginView.hidden = true;     // ⬅️ ẩn login
}
    function showLogin(){
  heroSection.hidden = true;
  toolbarEl.hidden = true;
  productsSection.hidden = true;
  detailView.hidden = true;
  loginView.hidden = false;    // ⬅️ hiện login
}

    const loginView = document.getElementById('loginView');

function showDetail(){
  detailView.hidden = false;
  heroSection.hidden = true;
  toolbarEl.hidden = true;
  productsSection.hidden = true;
  loginView.hidden = true;
} 

    // Hàm trả về danh sách size theo loại
    function sizesFor(p){ if (p.cate === 'giay') return [38,39,40,41,42,43]; if (p.cate === 'ao') return ['S','M','L','XL']; return ['mngvcfxsza8876543']; }

    // DOM chi tiết
    const detailBrand = document.getElementById('detailBrand');
    const detailTitle = document.getElementById('detailTitle');
    const detailPrice = document.getElementById('detailPrice');
    const detailOld   = document.getElementById('detailOld');
    const sizeGroup   = document.getElementById('sizeGroup');
    const sizeHint    = document.getElementById('sizeHint');
    const qtyDisplay  = document.getElementById('qtyDisplay');
    const minusBtn    = document.getElementById('minusBtn');
    const plusBtn     = document.getElementById('plusBtn');
    const addToCartDetail = document.getElementById('addToCartDetail');
    const buyNowBtn   = document.getElementById('buyNowBtn');
    const detailMeta  = document.getElementById('detailMeta');

    let currentDetail = { id:null, size:null, qty:1 };

    function openDetail(id){
      const p = products.find(x => x.id === Number(id));
      if (!p) { location.hash = ''; return; }
      currentDetail = { id: p.id, size: null, qty: 1 };
      detailBrand.textContent = p.brand;
      detailTitle.textContent = p.title;
      detailPrice.textContent = vnd.format(p.price);
      detailOld.textContent = p.oldPrice ? vnd.format(p.oldPrice) : '';
      qtyDisplay.textContent = '1';
      addToCartDetail.disabled = true; buyNowBtn.disabled = true;

      const sizes = sizesFor(p);
      sizeGroup.innerHTML = sizes.map(s => `<button type=\"button\" class=\"size-option\" data-size=\"${s}\">${s}</button>`).join('');
      sizeHint.textContent = p.cate === 'giay' ? 'Mẹo: Nếu bàn chân bè, chọn lớn hơn 0.5–1 size.' : (p.cate === 'ao' ? 'Form áo thể thao hơi ôm, nếu thích rộng chọn lớn hơn 1 size.' : 'Phụ kiện 1 size (FREE).');
      if (sizes.length === 1){ currentDetail.size = String(sizes[0]); sizeGroup.querySelector('.size-option').classList.add('active'); addToCartDetail.disabled = false; buyNowBtn.disabled = false; }

      sizeGroup.querySelectorAll('.size-option').forEach(btn => {
        btn.addEventListener('click', () => {
          sizeGroup.querySelectorAll('.size-option').forEach(x => x.classList.remove('active'));
          btn.classList.add('active');
          currentDetail.size = btn.dataset.size;
          addToCartDetail.disabled = false; buyNowBtn.disabled = false;
        });
      });

      minusBtn.onclick = () => { currentDetail.qty = Math.max(1, currentDetail.qty - 1); qtyDisplay.textContent = String(currentDetail.qty); }
      plusBtn.onclick  = () => { currentDetail.qty += 1; qtyDisplay.textContent = String(currentDetail.qty); }

      addToCartDetail.onclick = () => {
        if (!currentDetail.size) return alert('Chọn size trước khi thêm vào giỏ!');
        const exist = cart.find(c => c.id === p.id && c.size === currentDetail.size);
        if (exist) exist.qty += currentDetail.qty; else cart.push({ ...p, size: currentDetail.size, qty: currentDetail.qty });
        renderCart(); toggleCart(true);
      };

      buyNowBtn.onclick = () => { addToCartDetail.click(); alert('Đi tới trang thanh toán (demo)'); };

      detailMeta.textContent = `Mã SP: #${p.id} • Danh mục: ${p.cate} • Tình trạng: ${p.tag || 'thường'}`;
    }

    // =========================
    // ROUTER đọc hash
    // =========================
    function router(){
  const m = location.hash.match(/^#\/product\/(\d+)/);
  if (m) { openDetail(m[1]); showDetail(); return; }

  if (location.hash === '#/login') { showLogin(); return; }

  // mặc định là trang chủ
  showHome();
}
    window.addEventListener('hashchange', router);
    window.addEventListener('load', router);

    // Nút Quay lại
    document.querySelector('#loginView .backlink')?.addEventListener('click', (e) => {
  e.preventDefault();
  location.hash = ''; // về home
});

    // =========================
    // SLIDER (đặt sau router)
    // =========================
    const banner = document.getElementById('banner');
    const slidesWrap = banner.querySelector('.slides');
    const slides = Array.from(banner.querySelectorAll('.slide'));
    const dotsWrap = banner.querySelector('.dots');
    let idx = 0; let auto;
    function makeDots(){ dotsWrap.innerHTML = slides.map((_,i)=>`<span class=\"dot ${i===idx?'active':''}\" data-i=\"${i}\"></span>`).join(''); dotsWrap.querySelectorAll('.dot').forEach(d=>d.addEventListener('click',()=>go(+d.dataset.i))); }
    function go(i){ idx = (i+slides.length)%slides.length; slidesWrap.style.transform = `translateX(-${idx*100}%)`; makeDots(); }
    function start(){ auto = setInterval(()=>go(idx+1), 4500); }
    function stop(){ clearInterval(auto); }
    banner.addEventListener('mouseenter', stop); banner.addEventListener('mouseleave', start); makeDots(); start();

    // ESC để đóng giỏ
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggleCart(false); });

    // Xử lý đăng nhập trang riêng (#/login)
const loginBtn = document.getElementById("loginBtn");

// Khi bấm vào icon người → chuyển sang trang đăng nhập
document.getElementById('loginBtn')?.addEventListener('click', () => {
  location.hash = '#/login';
});

// Khi ở trang đăng nhập, xử lý form
const loginFormPage = document.getElementById("loginFormPage");

loginFormPage?.addEventListener("submit", (e) => {
  e.preventDefault();
  const username = document.getElementById("usernamePage").value.trim();
  const password = document.getElementById("passwordPage").value.trim();

  if (username === "admin" && password === "123") {
    alert("Đăng nhập thành công!");
    // ví dụ: ghi vào localStorage
    // localStorage.setItem("user", username);
    location.hash = ""; // quay về trang chủ
  } else {
    alert("Sai tên đăng nhập hoặc mật khẩu!");
  }
});
  </script>
</body>
</html>
